<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <meta name="keywords" content="hexo,ä¸ªäººåšå®¢,blog" />
  <meta name="description" content="LittleYçš„ä¸ªäººåšå®¢" />
  <meta http-equiv="x-dns-prefetch-control" content="on">
  <link rel="dns-prefetch" href="https://busuanzi.ibruce.info">
  <link rel="dns-prefetch" href="https://at.alicdn.com">
  
  
  
  <link rel="stylesheet" type="text/css" href="/./style/main.css">
	<link rel="shortcut icon" href="/favicon.ico" title="Favicon">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
	<title>å•ä¾‹æ¨¡å¼(Singleton Pattern)</title>
  
  
<meta name="generator" content="Hexo 5.4.0"></head>
<body>
  <canvas id="pattern-placeholder" height="230"></canvas>
<div class="navbar-header">
  <a class="blog-title" href="/">LittleY&#39;Blog</a>
  <a class="face-img" href="/">
    <img src="https://avatars.githubusercontent.com/u/47181393?v=4">
  </a>
</div>
<main>
  <div class="article-title">
    
  
  <h1 class="title">
    å•ä¾‹æ¨¡å¼(Singleton Pattern)
  </h1>
  


    <ul class="article-info">
      <li>
        å‘å¸ƒ
        <time datetime="2021-05-22T06:42:30.000Z" itemprop="datePublished">2021-05-22</time>
      </li>
      <li>
        
    æ›´æ–° <time datetime="2021-05-22T06:50:14.700Z" itemprop="dateUpdated">2021-05-22</time>

      </li>
      <li id="busuanzi_container_page_pv">
        é˜…è¯» <span id="busuanzi_value_page_pv"></span>
      </li>
    </ul>
  </div>
  <div class="container">
    <div class="article">
      <div class="content">
        
        <h2 id="å•ä¾‹æ¨¡å¼"><a href="#å•ä¾‹æ¨¡å¼" class="headerlink" title="å•ä¾‹æ¨¡å¼"></a>å•ä¾‹æ¨¡å¼</h2><p>åœ¨æœ‰äº›å¼€å‘åœºæ™¯ä¸­ï¼Œæ²¡æœ‰å¿…è¦æœ‰å¤šä¸ªå®ä¾‹å­˜åœ¨ï¼Œä»¥èŠ‚çœèµ„æºã€‚æ¯”å¦‚è¯´ <code>PropertiyMgr </code>å·¥å…·ç±»</p>
<h3 id="é¥¿æ±‰å¼"><a href="#é¥¿æ±‰å¼" class="headerlink" title="é¥¿æ±‰å¼"></a>é¥¿æ±‰å¼</h3><p>å®ç°ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Mgr01</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Mgr01 INSTANCE = <span class="keyword">new</span> Mgr01();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Mgr01</span><span class="params">()</span> </span>&#123;&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Mgr01 <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> INSTANCE;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">m</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;m&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Mgr01 m1 = Mgr01.getInstance();</span><br><span class="line">        Mgr01 m2 = Mgr01.getInstance();</span><br><span class="line">        System.out.println(m1 == m2);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿˜æœ‰ä¸€ç§å†™æ³•ï¼Œå’Œä¸Šé¢çš„å†™æ³•æ•ˆæœä¸€æ¨¡ä¸€æ ·ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Mgr02</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Mgr02 INSTANCE;</span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        INSTANCE = <span class="keyword">new</span> Mgr02();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Mgr02</span><span class="params">()</span> </span>&#123;&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Mgr02 <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> INSTANCE;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">m</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;m&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Mgr02 m1 = Mgr02.getInstance();</span><br><span class="line">        Mgr02 m2 = Mgr02.getInstance();</span><br><span class="line">        System.out.println(m1 == m2);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>ä¼˜ç‚¹</strong>ï¼šç±»åŠ è½½åˆ°å†…å­˜åï¼Œå°±å®ä¾‹åŒ–ä¸€ä¸ªå•ä¾‹ï¼ŒJVM ä¿è¯çº¿ç¨‹å®‰å…¨ç®€å•å®ç”¨ï¼Œæ¨èä½¿ç”¨ï¼</p>
<p><strong>ç¼ºç‚¹</strong>ï¼šä¸ç®¡ç”¨åˆ°ä¸å¦ï¼Œç±»è£…è½½æ—¶å°±å®Œæˆå®ä¾‹åŒ–ã€‚å¦‚æœç”¨ä¸ä¸Šå®ƒçš„è¯ï¼Œè£…è½½å®ƒä¼šé€ æˆèµ„æºæµªè´¹ã€‚</p>
<p>ç”±æ­¤æˆ‘ä»¬æœ‰äº†å¦ä¸€ä¸ªè§£å†³æ–¹æ¡ˆï¼Œé‚£å°±æ˜¯æ‡’æ±‰å¼ï¼š</p>
<h3 id="æ‡’æ±‰å¼ï¼ˆLazy-Loadingï¼‰"><a href="#æ‡’æ±‰å¼ï¼ˆLazy-Loadingï¼‰" class="headerlink" title="æ‡’æ±‰å¼ï¼ˆLazy Loadingï¼‰"></a>æ‡’æ±‰å¼ï¼ˆLazy Loadingï¼‰</h3><h4 id="ç¬¬ä¸€ç§å†™æ³•"><a href="#ç¬¬ä¸€ç§å†™æ³•" class="headerlink" title="ç¬¬ä¸€ç§å†™æ³•"></a>ç¬¬ä¸€ç§å†™æ³•</h4><p>å®ç°ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Mgr03</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Mgr03 INSTANCE;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Mgr03</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Mgr03 <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (INSTANCE == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">1</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            INSTANCE = <span class="keyword">new</span> Mgr03();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> INSTANCE;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">m</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;m&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç”±ä¸Šé¢ä»£ç å¯çŸ¥ï¼Œä½¿ç”¨æ‡’æ±‰å¼ä¹‹åï¼Œè¾¾åˆ°äº†æŒ‰éœ€åˆå§‹åŒ–çš„ç›®çš„ã€‚ä½†æ˜¯éšä¹‹è€Œæ¥çš„æ˜¯æ›´ä¸¥é‡çš„é—®é¢˜ï¼Œé‚£å°±æ˜¯å®ƒçš„<strong>çº¿ç¨‹ä¸å®‰å…¨</strong>é—®é¢˜ã€‚</p>
<p>å°±æ˜¯è¯´ï¼Œä¸¤ä¸ªçº¿ç¨‹å¦‚æœæ¥è¿‘åŒæ—¶è¿›å…¥ <code>INSTANCE == null</code> çš„åˆ¤æ–­è¯­å¥æ—¶ï¼Œä¸¤ä¸ªéƒ½ä¼šè¿›å…¥é‡Œé¢çš„ä»£ç å—è¿›è¡Œnewå¯¹è±¡ã€‚å¯çŸ¥æ­¤æ—¶ä¸¤ä¸ªçº¿ç¨‹æ‹¿åˆ°çš„å®ä¾‹å°±ä¸æ˜¯åŒä¸€ä¸ªå®ä¾‹ã€‚è¿™å°±æ˜¯çº¿ç¨‹ä¸å®‰å…¨é—®é¢˜ã€‚å¯ä»¥ç”¨ä»¥ä¸‹æµ‹è¯•ä»£ç å¯¹å…¶è¿›è¡Œæµ‹è¯•ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;<span class="number">100</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">new</span> Thread(()-&gt;&#123;</span><br><span class="line">            System.out.println(Mgr04.getInstance().hashCode());</span><br><span class="line">        &#125;).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸ºäº†è§£å†³çº¿ç¨‹ä¸å®‰å…¨çš„é—®é¢˜ï¼Œæˆ‘ä»¬åˆè¿›è¡Œäº†ä»¥ä¸‹ä¼˜åŒ–ï¼š</p>
<h4 id="ç¬¬äºŒç§å†™æ³•"><a href="#ç¬¬äºŒç§å†™æ³•" class="headerlink" title="ç¬¬äºŒç§å†™æ³•"></a>ç¬¬äºŒç§å†™æ³•</h4><p>ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Mgr04</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Mgr04 INSTANCE;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Mgr04</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> Mgr04 <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (INSTANCE == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">1</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            INSTANCE = <span class="keyword">new</span> Mgr04();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> INSTANCE;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">m</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;m&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å¯¹å®ä¾‹æ–¹æ³•è¿›è¡Œäº†åŠ é”å¤„ç†ï¼Œä¿è¯äº†çº¿ç¨‹å®‰å…¨çš„é—®é¢˜ã€‚ä½†æ˜¯ï¼Œä¸éš¾æƒ³è±¡ï¼Œå¦‚æœæœ‰å¤§é‡çš„çº¿ç¨‹è®¿é—®çš„è¯ï¼Œé‚£ä¹ˆå®ƒçš„<strong>æ•ˆç‡ä¼šå¤§å¹…ä¸‹é™</strong>ã€‚</p>
<p>æˆ‘ä»¬å†åšä¸€ä¸‹ä¼˜åŒ–ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Mgr05</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Mgr05 INSTANCE;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Mgr05</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Mgr05 <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (INSTANCE == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (Mgr05.class) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    Thread.sleep(<span class="number">1</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">                INSTANCE = <span class="keyword">new</span> Mgr05();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> INSTANCE;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">m</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;m&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™æ¬¡æˆ‘ä»¬æŠŠé”åŠ åœ¨äº†å®ä¾‹æ–¹æ³•é‡Œé¢çš„<code>Mgr05.class</code>ä¸Šï¼Œå¦„å›¾é€šè¿‡å‡å°åŒæ­¥ä»£ç å—çš„æ–¹å¼æé«˜æ•ˆç‡ï¼Œæµ‹è¯•åï¼Œä¸å¯è¡Œã€‚</p>
<p>åŸå› æ˜¯ï¼Œè™½ç„¶å¯¹<code>Mgr05.class</code>è¿›è¡Œäº†åŠ é”ï¼Œä½†æ˜¯å¦‚æœä¸¤ä¸ªçº¿ç¨‹åŒæ—¶è¿›å…¥<code>INSTANCE==null</code>ä»£ç å—é‡Œé¢ï¼Œå®ƒä¾ç„¶ä¼šnewå‡ºä¸¤ä¸ªä¸åŒçš„å®ä¾‹ã€‚</p>
<p>ç°åœ¨å¯çŸ¥ï¼Œé—®é¢˜å°±å¤„åœ¨äº†<code>INSTANCE == null</code>åˆ¤æ–­è¯­å¥è¿™å—å„¿ï¼Œé‚£ä¹ˆæˆ‘ä»¬é’ˆå¯¹è¿™å—å„¿è¿›è¡Œä¼˜åŒ–ã€‚</p>
<h4 id="ç¬¬ä¸‰ç§å†™æ³•"><a href="#ç¬¬ä¸‰ç§å†™æ³•" class="headerlink" title="ç¬¬ä¸‰ç§å†™æ³•"></a>ç¬¬ä¸‰ç§å†™æ³•</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Mgr06</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Mgr06 INSTANCE; <span class="comment">//JIT</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Mgr06</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Mgr06 <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (INSTANCE == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="comment">//åŒé‡æ£€æŸ¥</span></span><br><span class="line">            <span class="keyword">synchronized</span> (Mgr06.class) &#123;</span><br><span class="line">                <span class="keyword">if</span>(INSTANCE == <span class="keyword">null</span>) &#123;</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        Thread.sleep(<span class="number">1</span>);</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                    INSTANCE = <span class="keyword">new</span> Mgr06();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> INSTANCE;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">m</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;m&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™æ¬¡ä¼˜åŒ–ï¼Œæˆ‘ä»¬é’ˆå¯¹çš„å°±æ˜¯åˆ¤æ–­å®ä¾‹æ˜¯å¦ä¸ºç©ºè¿™ä¸ªç‚¹ï¼Œè¿›è¡Œäº†åŒå±‚æ£€æŸ¥ï¼Œå³ä½¿ä¸¤ä¸ªåŒæ—¶è¿›å…¥äº†ç¬¬ä¸€å±‚åˆ¤æ–­ï¼Œä¸€ä¸ªæ‹¿åˆ°é”ä¹‹åï¼Œå…ˆå®ä¾‹åŒ–äº†ä¸€ä¸ªå¯¹è±¡ï¼Œç¬¬äºŒä¸ªå†è¿›å»ä¹‹åï¼Œè¿˜éœ€è¦ç¬¬äºŒåªåˆ¤æ–­ï¼Œå¦‚æœå·²ç»æœ‰äº†å®ä¾‹ï¼Œé‚£ä¹ˆå°±ç›´æ¥è·³å‡ºï¼Œä¸å†newæ–°çš„å®ä¾‹ã€‚</p>
<p>è¿™æ—¶å¯èƒ½ä¼šæœ‰ä¸ªç–‘é—®ï¼Œé‚£ä¹ˆå¤–å±‚çš„æ£€æŸ¥è¿˜æœ‰å¿…è¦å­˜åœ¨å—ï¼Ÿç­”æ¡ˆæ˜¯å½“ç„¶éœ€è¦ï¼Œå¦‚æœæ²¡æœ‰äº†å¤–å±‚çš„åˆ¤æ–­ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½è¦åŠ é”ä¸Šé”ï¼Œä¸å¾—æŠŠJVMç´¯æ­»ï¼Œä¸‹å¯èƒ½è‡ªç„¶å°±å˜å·®äº†ã€‚</p>
<h3 id="é™æ€å†…éƒ¨ç±»æ–¹å¼"><a href="#é™æ€å†…éƒ¨ç±»æ–¹å¼" class="headerlink" title="é™æ€å†…éƒ¨ç±»æ–¹å¼"></a>é™æ€å†…éƒ¨ç±»æ–¹å¼</h3><p>ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Mgr07</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Mgr07</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">volatile</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Mgr07Holder</span> </span>&#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> Mgr07 INSTANCE = <span class="keyword">new</span> Mgr07();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Mgr07 <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Mgr07Holder.INSTANCE;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">m</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;m&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªæ–¹æ³•ç®—æ˜¯ç›®å‰æ¥è¯´æ¯”è¾ƒå®Œç¾çš„ä¸€ç§å†™æ³•ã€‚JVMä¿è¯å•ä¾‹ï¼ŒåŠ è½½å¤–éƒ¨ç±»æ—¶ä¸ä¼šåŠ è½½å†…éƒ¨ç±»ï¼Œè¿™æ ·å¯ä»¥å³å¯ä»¥å®ç°æ‡’åŠ è½½ï¼Œè¿˜èƒ½ä¿è¯çº¿ç¨‹å®‰å…¨ã€‚</p>
<blockquote>
<p>æ³¨æ„ä½¿ç”¨<code>volatile</code>ä¿®é¥°å•ä¾‹å¯¹è±¡ï¼Œç›®çš„æ˜¯ä¿è¯å¤šçº¿ç¨‹ç¯å¢ƒä¸‹çš„çº¿ç¨‹å®‰å…¨ã€‚</p>
</blockquote>
<h3 id="æšä¸¾ç±»æ–¹æ³•"><a href="#æšä¸¾ç±»æ–¹æ³•" class="headerlink" title="æšä¸¾ç±»æ–¹æ³•"></a>æšä¸¾ç±»æ–¹æ³•</h3><p>ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">enum</span> <span class="title">Mgr08</span> </span>&#123;    INSTANCE;    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">m</span><span class="params">()</span> </span>&#123;&#125;&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™æ˜¯ã€ŠJava Effectiveã€‹è¿™æœ¬ä¹¦ä¸­çš„ä¸€ç§å†™æ³•ï¼Œå†™æ³•ç®€å•ï¼Œè¿˜èƒ½ä¿è¯çº¿ç¨‹åŒæ­¥é—®é¢˜ï¼Œè¿˜å¯ä»¥é˜²æ­¢ååºåˆ—åŒ–(é€šä¿—ç‚¹è¯´å°±æ˜¯é˜²æ­¢åå°„å¯¹å…¶é€ æˆçš„ç ´å)ã€‚ä¸­åŠŸèƒ½ä¸Šæ¥è¯´æ˜¯æ‰€æœ‰å•ä¾‹æ¨¡å¼å†™æ³•ä¸­æœ€å®Œç¾çš„ã€‚ä½†æ˜¯ä¸ªäººä¸æ¨èè¿™ç§å†™æ³•ï¼Œæ¯”è¾ƒåˆ«æ‰­ï¼Œä¸å¤Ÿä¼˜é›…ã€‚</p>
<p>è®¾è®¡æ¨¡å¼æ˜¯ä¸€ç§ç”Ÿäº§æŠ€å·§å’Œæ¨¡å¼ï¼Œæ²¡æœ‰å¿…è¦åƒå­”ä¹™å·±ä¸€æ ·ç ”ç©¶<code>èŒ´</code>å­—æœ‰å‡ ç§å†™æ³•ï¼Œä»¥å®é™…å¼€å‘çš„åœºæ™¯çš„é€‰æ‹©ä¸åŒçš„å†™æ³•ã€‚</p>

      </div>
        <div class="support-author">
          <p>æ„Ÿè°¢æ‚¨çš„é˜…è¯»ã€‚ ğŸ™
          <a href="https://littley98.github.io/index.html" target="_blank">å…³äºè½¬è½½è¯·çœ‹è¿™é‡Œ</a>
            <!--<a class="btn-pay"  href="#pay-modal">Â¥ æ‰“èµæ”¯æŒ</a>-->
          </p>
        </div>
        <!--
            <div class="like ">
              <div class="like-button">
                <a id="like-note" href="">
                  <i class="icon-heart"></i>å–œæ¬¢
                </a>
              </div>
              <span id="likes-count">256</span>
            </div>
        -->
        <div class="otherLink">
          <div class="previous">
          </div>
          <div class="next">
          </div>
        </div>
        <div class="comments" id="comments">
          

        </div>
      </div>
    </div>
   </div>
</main>
<div class="footer">
  <div class="info">
    <p>
    <a target="_blank" rel="noopener" href="https://hexo.io"> Hexo </a> å¼ºåŠ›é©±åŠ¨ |
      <a target="_blank" rel="noopener" href="https://github.com/Youthink/hexo-themes-yearn"> Yearn </a>
      ä¸»é¢˜
    </p>
    <p>&copy;2020-2021 LittleYçš„åšå®¢</p>
  </div>
</div>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<script>//console
  var consoleConfig = '\næ¬¢è¿è®¿é—® https://littley98.github.io/ ï¼Œå›´è§‚LittleYçš„åšå®¢(ã¥ï½¡â—•â€¿â€¿â—•ï½¡)ã¥ï¼\n'.split(',');
  var canConsole = true;
  var consoleInfo = (function(consoleConfig) {
  if (!canConsole || !consoleConfig || consoleConfig.length < 1) {
    return;
  }
  var consoleColor = '#6190e8';
  var _console;
  var backgroundTextStyle = 'padding: 1px 5px;color: #fff;background: ' + consoleColor + ';'
  var textStyle = 'color: ' + consoleColor + ';';

  consoleConfig.map(o => {
    var num = (o.match(/%c/g) || []).length;
    if(/^http(s)?:\/\//.test(o)) {
      console.log('%c     ', 'background: url(' + o + ') no-repeat left center;font-size: 180px;');
      return;
    }
    if (num > 0) {
      var logArguments = [];
      for (var i = 0; i < num; i++) {
        if (i % 2 === 0) {
          logArguments.push(backgroundTextStyle);
        } else {
          logArguments.push(textStyle);
        }
      }
      (_console = console).log.apply(_console, ['%c' + o, textStyle].concat(logArguments));
      return;
    }
    console.log('%c' + o, textStyle);
  });
}(consoleConfig));</script><script type="text/javascript" src="/./js/main.js"></script>

  <script src="//at.alicdn.com/t/font_159214_mvtxvg9me9.js"></script>
</body>
</html>
